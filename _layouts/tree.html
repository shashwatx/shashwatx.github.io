--- ---
<!DOCTYPE html>
<html lang="en">

<head>

    {% include header.html %}

    <!--<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="-25px" y="-55px" width="35.219px" height="35.219px" viewBox="0 0 35.219 35.219" style="enable-background:new 0 0 35.219 35.219;" xml:space="preserve">-->
     <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="0px" height="0px" viewBox="0 0 0 0" style="display:none;" xml:space="preserve">
        <defs>
            <g id="mushroom">
                <path d="M30.462,3.368c-3.719-4.312-12.156-3.625-16.188-2.594C10.243,1.805,4.37,5.868,2.807,8.681S1.337,15.9,2.962,19.369
		c1.625,3.469,4.75,4.438,7.156,4.875c2.406,0.438,3.531-0.344,3.688-0.656c0.157-0.312,0.229-0.462,0.5-0.281
		c0.281,0.188,0.562,1,0.375,1.812s0.969,0.938,1.438,0.938c0.469,0,0.469,1.75,0.531,3.312s-0.688,2.781,0.562,4.062
		c1.25,1.28,3.281,2.625,7.438,1.125c4.157-1.5,4.47-3.72,4.75-4.938c0.281-1.22-0.219-2.22-0.812-2.938s-2.219-3.375-2.312-4
		c-0.093-0.625,0.095-0.844,0.345-0.844s0.719-0.094,1.438-0.375s-0.188-1.656-0.688-1.938c-0.5-0.282,1.375-1.344,2.125-1.625
		c0.75-0.281,1.5-0.938,3.03-3.188C34.057,12.46,34.181,7.681,30.462,3.368z M14.462,21.148c-0.094,0.781-0.143,0.744-0.594,0.595
		c-0.094-0.031-0.5-0.062-1.312-0.5s-1.281-1.345-1-1.595c0.281-0.25,1.875,0.062,2.594,0.406
		C14.87,20.398,14.557,20.368,14.462,21.148z M14.87,19.557c-0.125,0.28-1.906-0.595-2.906-0.906c-1-0.312-0.25-1.125,0.062-1.562
		S12.45,16.65,12.65,16.9c0.125,0.156,2.031,0.531,2.5,0.969c0.469,0.438,0.219,0.562,0,0.844
		C14.932,18.995,14.995,19.273,14.87,19.557z M16.962,16.462c0.344,0.469-0.656,1.062-1,1.25c-0.344,0.188-0.438-0.188-0.781-0.531
		c-0.343-0.343-0.875-0.875-1.688-1.094c-0.813-0.219,0.077-0.996,0.5-1.094c0.406-0.094,1-0.406,1.344-0.562
		C15.682,14.275,16.62,15.993,16.962,16.462z M17.587,13.462c0.406-0.344,1.188-0.219,1.188-0.031s0.095,1.344,0.312,1.719
		s-0.281,0.562-0.875,0.781c-0.594,0.219-0.5,0.375-0.688,0.312s-0.562-1.156-1-1.812C16.086,13.775,17.125,13.854,17.587,13.462z
		 M28.337,28.898c0.281,1.062-0.938,2.845-4.312,4.531c-3.374,1.688-5.655-0.438-5.875-1.219c-0.219-0.781,0.344-1.656,0.938-2.188
		c0.594-0.532,2.603-1.657,3.406-1.906C25.62,27.148,28.056,27.837,28.337,28.898z M26.962,26.087c0.531,0.75-0.125,0.5-1.406,0.47
		c-1.281-0.031-2.125-0.031-3.781,0.438c-1.655,0.469-3.688,2.219-3.938,2.469s-0.406-2.812-0.406-3.844
		c0-1.032-0.031-2.344,0.5-2.406c0.531-0.062,0.843,0.031,1.688-0.562c0.844-0.592,0.799-1.784,1-1.844
		c0.53-0.156,0.812,0.562,1.438,0.938s1.281-0.656,1.438-0.812c0.156-0.156,0.405-0.25,0.844,0.03
		c0.438,0.281,0.938,0.625,0.812,0.845c-0.126,0.219-0.03,0.344,0.25,1.375C25.682,24.214,26.431,25.337,26.962,26.087z
		 M25.962,20.682c-0.438-0.095-1.156-0.781-1.969-1.095c-0.813-0.313-1.345,0.438-1.5,0.72c-0.156,0.28-0.47-0.062-0.75-0.375
		c-0.281-0.313-0.875-0.656-1.688-0.25c-0.812,0.405-0.875,1.405-0.875,2.03s-0.781,0.281-1.938,0.595
		c-1.157,0.312-0.688,2.062-1.094,2.688c-0.406,0.626-0.719-0.188-0.906-0.562c-0.187-0.373,0-1.406,0.125-1.781
		s-0.062-1.655,0.219-2.594c0.281-0.938,2.476-2.896,3.094-3.156c2.812-1.188,5.062,0.344,6.125,1.219
		c1.063,0.875,1.906,2.219,1.938,2.5C26.775,20.9,26.4,20.773,25.962,20.682z M19.306,13.524c-0.031-0.594,0.656-0.625,1-0.625
		c0.219,0,0.844-0.062,1.25,0s0.031,1.156-0.094,1.625c-0.125,0.469-0.281,0.625-0.594,0.625c-0.313,0-0.781,0.156-1.062,0.188
		C19.525,15.369,19.337,14.118,19.306,13.524z M22.37,13.306c0.219-0.312,0.567,0.094,0.905,0.094c0.095,0,0.688,0.25,0.906,0.438
		s-0.344,1.031-0.594,1.438c-0.25,0.407-0.281,0.625-0.5,0.469c-0.219-0.156-0.438-0.25-0.812-0.5S22.15,13.618,22.37,13.306z
		 M24.495,15.337c0.375-0.531,0.542-0.927,0.78-0.688c0.22,0.219,0.5,0.781,0.595,1.125c0.094,0.344,0.094,1-0.188,1.375
		s-0.375-0.125-0.938-0.5C24.18,16.274,24.12,15.868,24.495,15.337z M31.212,12.556c-0.656,2.094-1.75,3.156-2.188,3.438
		c-0.438,0.282-0.594,0.562-0.78,0.281c-0.188-0.281-0.97-2.812-1.875-3.469c-0.906-0.657-5.438-2.219-8.75-1.281
		c-3.312,0.938-5.562,2.562-6.906,4c-1.344,1.438-1.25,6.157-0.688,6.625c0.245,0.203-3.5-0.906-4.156-1.719
		c-0.656-0.813-1.875-4.062-2.125-7.125s1.344-4.532,2.751-6.032c1.407-1.5,5.531-3.781,6.938-4.375
		c1.407-0.594,7.875-1.219,10.125-0.906s5.312,1.781,6.75,4.188C31.746,8.588,31.87,10.462,31.212,12.556z M7.182,8.618
		c-1.188,1.25-2.031,2.719-2.156,4.562C4.9,15.023,6.08,15.094,6.557,14.93c1-0.344,0.344-0.938,0.562-2.125
		c0.218-1.187,1.312-3.031,2.5-3.719s2.469-1.218,1.594-2.155S8.37,7.368,7.182,8.618z M19.462,23.837
		c-0.273-0.092-0.688,0.375-0.344,1.625c0.344,1.25,0.5,1.438,0.905,1.312c0.406-0.125,0.281-0.844,0.22-1.719
		C20.181,24.18,19.745,23.932,19.462,23.837z" />
            </g>
        </defs>
    </svg>

</head>

<body>
    <div id="wrapper">
        {%include navigation.html %}
        <div class="container">
            {{ content }}
        </div>
    </div>

    {% include scripts.html %}

    <script type="text/javascript">
        var pubs = {
            "name": "Hungry ?",
            "children": [
                {
                    "name": "Sweet ?",
                    "children": [
                        {
                            "name": "Indian",
                            "children": [
                                {
                                    "name": "Kulfi",
                                    "leaf": "true",
                                    "url": "/pistaKulfiEng/"
                                }]
                        },
                        {
                            "name": "Others",
                            "children": [
                                {
                                    "name": "PBJ Biscuits",
                                    "leaf": "true",
                                    "url": "google.com"
                                },
                                {
                                    "name": "Coco Biscuits",
                                    "leaf": "true",
                                    "url": "yahoo.com"
                                },
                                {
                                    "name": "Rafaello",
                                    "leaf": "true",
                                    "url": "satyam.com"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "Salty ?",
                    "children": [
                        {
                            "name": "Indian",
                            "children": [
                                {
                                    "name": "Easy",
                                    "children": [
                                        {
                                            "name": "Matar Paratha",
                                            "leaf": "true",
                                            "url": "google.com"
                                        },
                                        {
                                            "name": "Tandoori Chicken",
                                            "leaf": "true",
                                            "url": "yahoo.com"
                                        },
                                        {
                                            "name": "Dal",
                                            "leaf": "true",
                                            "url": "satyam.com"
                                        },
                                        {
                                            "name": "Dosa",
                                            "leaf": "true",
                                            "url": "satyam.com"
                                        }
                                    ]
                                },
                                {
                                    "name": "Not so easy !",
                                    "children": [
                                        {
                                            "name": "Bhindi",
                                            "leaf": "true",
                                            "url": "google.com"
                                        },
                                        {
                                            "name": "Khaman Dhokla",
                                            "leaf": "true",
                                            "url": "yahoo.com"
                                        },
                                        {
                                            "name": "Biryani",
                                            "leaf": "true",
                                            "url": "satyam.com"
                                        },
                                        {
                                            "name": "Chana Masala",
                                            "leaf": "true",
                                            "url": "satyam.com"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "Others",
                            "children": [
                                {
                                    "name": "5 min recipes"
                                },
                                {
                                    "name": "What is this ?"
                                }
                            ]
                        }

                    ]
                }
            ]
        };


        var margin = {
                top: 50,
                right: 0,
                bottom: 0,
                left: 50
            },
            width = 800 - margin.right - margin.left,
            height = 800 - margin.top - margin.bottom;

        var i = 0,
            duration = 750,
            root;

        var tree = d3.layout.tree()
            .size([height, width]);

        var diagonal = d3.svg.diagonal()
            .projection(function (d) {
                return [d.x, d.y];
            });

        var svg = d3.select("#treeBox").append("svg")
            .attr("width", width + margin.right + margin.left)
            .attr("height", height + margin.top + margin.bottom)
            .attr("id", "recipeTree")
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        root = pubs;
        root.x0 = 0;
        root.y0 = 0;

        root.children.forEach(collapse);
        update(root);

        d3.select(self.frameElement).style("height", "800px");

        function update(source) {

            // Compute the layout for subtree at source
            var nodes = tree.nodes(root).reverse(),
                links = tree.links(nodes);

            // Normalize for fixed-depth.
            nodes.forEach(function (d) {
                d.y = d.depth * 80;
            });




            // Create nodes…
            var node = svg.selectAll("g.node")
                .data(nodes, function (d) {
                    return d.id || (d.id = ++i);
                });

            // Apply class, translate to parent's position.
            var nodeEnter = node.enter().append("g")
                .attr("class", "node")
                .attr("cursor", function (d) {
                    if (d.children || d._children) return "pointer";
                    else return "default";
                })
                .attr("transform", function (d) {
                    return "translate(" + source.x0 + "," + source.y0 + ")";
                })
                .on("click", function (d) {
                    if (d.children || d._children) return click(d);
                });

            nodeEnter.append("use")
                .attr("xlink:href", "#mushroom")
                .attr("y", function (d) {
                    if (d.id == 3) return -25;
                    else return 0;
                })
                .attr("x", function (d) {
                    if (d.id == 3) return -25;
                    else return -15;
                });

            nodeEnter.append("text")
                .attr("x", function (d) {
                    return ((-1 * d.name.length) * 3.5 + "px");
                })
                .attr("dy", function (d) {
                    if (d.id == 3)
                        return "25px";
                    else
                        return "55px";
                })
                .attr("text-anchor", function (d) {
                    return d.children || d._children ? "start" : "start";
                })
                .text(function (d) {
                    return d.name;
                })
                .style("fill-opacity", 1e-6);

            nodeEnter.append("a")
                .attr("xlink:href", function (d) {
                    if (d.leaf)
                        return d.url;
                })
                .append("rect")
                .attr("y", 40)
                .attr("x", function (d) {
                    return ((-1 * d.name.length) * 3.5 + "px");
                })
                .attr("height", function (d) {
                    if (d.leaf) return "20px";
                    else return "0px";
                })
                .attr("width", function (d) {
                    if (d.leaf) return d.name.length * 9 + "px";
                    else return "0px";
                })
                .style("fill", "red")
                .style("fill-opacity", 1e-6);


            // Translate nodes to their position.
            var nodeUpdate = node.transition()
                .duration(duration)
                .attr("transform", function (d) {
                    return "translate(" + d.x + "," + d.y + ")";
                });


            // circle, text  hidden -> visible

            nodeUpdate.select("text")
                .style("fill-opacity", 1);

            nodeUpdate.select("a").select("rect")
                .style("fill-opacity", 0.4);




            // closing a node

            // Translate children back to parent's position.
            var nodeExit = node.exit().transition()
                .duration(duration)
                .attr("transform", function (d) {
                    return "translate(" + source.x + "," + source.y + ")";
                })
                .remove();

            nodeExit.select("text")
                .style("fill-opacity", 1e-6);

            nodeExit.select("a").select("rect")
                .style("fill-opacity", 1e-6);




            // Create links…
            var link = svg.selectAll("path.link")
                .data(links, function (d) {
                    return d.target.id;
                });

            // Enter any new links at the parent's previous position.
            link.enter().insert("path", "g")
                .attr("class", "link")
                .attr("d", function (d) {
                    var o = {
                        y: source.x0,
                        x: source.y0
                    };
                    return diagonal({
                        source: o,
                        target: o
                    });
                });

            // Transition links to their new position.
            link.transition()
                .duration(duration)
                .attr("d", diagonal);




            // Closing links
            // Transition exiting nodes to the parent's new position.
            link.exit().transition()
                .duration(duration)
                .attr("d", function (d) {
                    var o = {
                        x: source.y,
                        y: source.x
                    };
                    return diagonal({
                        source: o,
                        target: o
                    });
                })
                .remove();

            // Stash the old positions for transition.
            nodes.forEach(function (d) {
                d.x0 = d.x;
                d.y0 = d.y;
            });
        }

        // Toggle children on click.
        function click(d) {
            if (d.children) {
                d._children = d.children;
                d.children = null;
            } else {
                d.children = d._children;
                d._children = null;
            }
            update(d);
        }

        function collapse(d) {
            if (d.children) {
                d._children = d.children;
                d._children.forEach(collapse);
                d.children = null;
            }
        }
    </script>
</body>

</html>